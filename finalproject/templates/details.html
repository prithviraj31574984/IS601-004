
<!doctype html>
                            
<head>
    <script src="https://code.jquery.com/jquery-3.5.1.js"
    integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc="
    crossorigin="anonymous"></script>
    <!-- Mobile Metas -->
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <!-- Site Metas -->
    <meta name="keywords" content="" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <link rel="shortcut icon" href={{url_for("static",filename="images/favicon.png")}} type="">
    <title>online shop</title>
    <!-- bootstrap core css -->
    <link rel="stylesheet" type="text/css" href={{url_for("static",filename="css/bootstrap.css")}} />
    <!-- font awesome style -->
    <link href={{url_for("static",filename="css/font-awesome.min.css")}} rel="stylesheet" />
    <!-- Custom styles for this template -->
    <link href={{url_for("static",filename="css/style.css")}} rel="stylesheet" />
    <!-- responsive style -->
    <link href={{url_for("static",filename="css/responsive.css")}} rel="stylesheet" />

<style>
                                
body {
    font-family: 'Roboto Condensed', sans-serif;
    background-color: #f5f5f5
}

.hedding {
    font-size: 20px;
    color: #ab8181;
}

.main-section {
    position: absolute;
    left: 50%;
    right: 50%;
    transform: translate(-50%, 5%);
}

.left-side-product-box img {
    width: 100%;
}

.left-side-product-box .sub-img img {
    margin-top: 5px;
    width: 83px;
    height: 100px;
}

.right-side-pro-detail span {
    font-size: 15px;
}

.right-side-pro-detail p {
    font-size: 25px;
    color: #a1a1a1;
}

.right-side-pro-detail .price-pro {
    color: #E45641;
}

.right-side-pro-detail .tag-section {
    font-size: 18px;
    color: #5D4C46;
}

.pro-box-section .pro-box img {
    width: 100%;
    height: 200px;
}




.card {
    position: relative;
    display: flex;
    flex-direction: column;
    min-width: 0;
    /* padding: 20px;
    width: 450px; */
    word-wrap: break-word;
    background-color: #fff;
    background-clip: border-box;
    border-radius: 6px;
    -moz-box-shadow: 0px 0px 5px 0px rgba(212, 182, 212, 1)
}

.comment-box {
    padding: 5px
}

.comment-area textarea {
    resize: none;
    border: 1px solid #ad9f9f
}

.form-control:focus {
    color: #495057;
    background-color: #fff;
    border-color: #ffffff;
    outline: 0;
    box-shadow: 0 0 0 1px rgb(255, 0, 0) !important
}

.send {
    color: #fff;
    background-color: #ff0000;
    border-color: #ff0000
}

.send:hover {
    color: #fff;
    background-color: #f50202;
    border-color: #f50202
}

.rating {
    display: flex;
    margin-top: -10px;
    flex-direction: row-reverse;
    margin-left: -4px;
    float: left
}

.rating>input {
    display: none
}

.rating>label {
    position: relative;
    width: 19px;
    font-size: 25px;
    color: #ff0000;
    cursor: pointer
}

.rating>label::before {
    content: "\2605";
    position: absolute;
    opacity: 0
}

.rating>label:hover:before,
.rating>label:hover~label:before {
    opacity: 1 !important
}

.rating>input:checked~label:before {
    opacity: 1
}

.rating:hover>input:checked~label:before {
    opacity: 0.4
}








@media (min-width:360px) and (max-width:640px) {
    .pro-box-section .pro-box img {
        height: auto;
    }
}


</style>
                                <!-- <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js'></script>
                                <script type='text/javascript' src='https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js'></script> -->
                                <!-- <script type='text/javascript' src='https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js'></script> -->
                            </head>
<body oncontextmenu='return false' class='snippet-body'>








    <header class="header_section">
        <div class="container">
           <nav class="navbar navbar-expand-lg custom_nav-container ">
              <a class="navbar-brand" href="/"><img width="250" src={{url_for("static",filename="images/logo.png")}} alt="logo" /></a>
              <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
              <span class=""> </span>
              </button>
              <div class="collapse navbar-collapse" id="navbarSupportedContent">
                 <ul class="navbar-nav">
                    <li class="nav-item active">
                       <a class="nav-link" href="/">Home <span class="sr-only">(current)</span></a>
                    </li>
                
                    <li class="nav-item">
                       <a class="nav-link" href="/products">Products</a>
                    </li>
               
                    {%if current_user.is_authenticated%}
                    <li class="nav-item">
                       <a class="nav-link" href="/logout">logout</a>
                    </li>
                    {%else%}
                    
                    <li class="nav-item">
                       <a class="nav-link" href="/login">Login</a>
                    </li>
                    {%endif%}
                    <li class="nav-item">
                       <a class="nav-link" href="/show_cart">
                          <i class="fa" style="font-size:24px">&#xf07a;</i>
                          <span class='badge badge-warning' id='lblCartCount'> {{cart_data |length}} </span>
                       </a>
                    </li>
                   
                 </ul>
              </div>
           </nav>
        </div>
     </header>


<!-- <div class='row'> -->
<div class="row">
    <div class="col-lg-8 border p-3 main-section bg-white">
        <div class="row hedding m-0 pl-3 pt-0 pb-3">
            {{product.name}} Details
        </div>
        <div class="row m-0">
            <div class="col-lg-4 left-side-product-box pb-3">
                <img src={{url_for("static", filename="images/")}}{{product.image}} class="border p-3">
           
            </div>
            <div class="col-lg-8">
                <div class="right-side-pro-detail border p-3 m-0">
                    <div class="row">
                        <div class="col-lg-12">

                            <p class="m-0 p-0">{{product.name}}</p>
                        </div>
                        <div class="col-lg-12">
                            <p class="m-0 p-0 price-pro">${{product.unit_price}}</p>
                            <hr class="p-0 m-0">
                        </div>
                        <div class="col-lg-12 pt-2">
                            <h5>Product Detail</h5>
                            <span>{{product.description}}</span>
                            <hr class="m-0 pt-2 mt-2">
                        </div>
                       
                        <div class="col-lg-12">
                            <h6>Stock :</h6>
                            <input type="disabled" class="form-control text-center w-100" value="{{product.stock}}" disabled>
                        
                        </div>
                        <div class="col-lg-12 mt-3">
                            <div class="row">
                                <div class="col-lg-6 pb-2">
                                    <form id="add_cart">
                                    <input type="hidden" id="item_id" value="{{product.id}}">
                                    <button type="submit" class="btn btn-danger w-100">Add To Cart</button>
                                    </form>
                                </div>
 
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        







       <br><br><br><br>


        <div class="container">
            <h2 class="text-center">User Review</h2>
            {%for rating in rating.items%}
            <div class="card">
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-2">
                            <img src="https://image.ibb.co/jw55Ex/def_face.jpg" class="img img-rounded img-fluid"/>
                            <p class="text-secondary text-center"></p>
                        </div>
                        <div class="col-md-10">
                            <p>
                            <style>
                                .checked {
  color: orange;
}
                            </style>
                                {%for user in user%}
                                {% if rating.user_id == user.id%}
                                <a class="float-left" href="https://maniruzzaman-akash.blogspot.com/p/contact.html"><strong>{{user.name}} 
                                
                                {%if user.visibility=="True"%}
                                    {{user.visibility}}
                                    ({{user.email}})
                                {%endif%}
                                
                                
                                
                                </strong></a>
                                {%endif%}
                                {%endfor%}
                                
                                {%if rating.rating == 0%}
                                <span class="float-right"><i class="fa fa-star"></i></span>
                                <span class="float-right"><i class="fa fa-star"></i></span>
                                <span class="float-right"><i class="fa fa-star"></i></span>
                                <span class="float-right"><i class="fa fa-star"></i></span>
                                <span class="float-right"><i class="fa fa-star"></i></span>
                                {%elif rating.rating == 1 %}
                                <span class="float-right"><i class="fa fa-star"></i></span>
                                <span class="float-right"><i class="fa fa-star"></i></span>
                                <span class="float-right"><i class="fa fa-star"></i></span>
                                <span class="float-right"><i class="fa fa-star"></i></span>
                                <span class="float-right"><i class="fa fa-star checked"></i></span>
                              
                                {%elif rating.rating == 2 %}
                                <span class="float-right"><i class="fa fa-star"></i></span>
                                <span class="float-right"><i class="fa fa-star"></i></span>
                                <span class="float-right"><i class="fa fa-star"></i></span>
                                <span class="float-right"><i class="fa fa-star checked"></i></span>
                                <span class="float-right"><i class="fa fa-star checked"></i></span>
                                
                                {%elif rating.rating == 3 %} 
                                <span class="float-right"><i class="fa fa-star"></i></span>
                                <span class="float-right"><i class="fa fa-star"></i></span>
                                <span class="float-right"><i class="fa fa-star checked"></i></span>
                                <span class="float-right"><i class="fa fa-star checked"></i></span>
                                <span class="float-right"><i class="fa fa-star checked"></i></span>
                              
                                {%elif rating.rating == 4 %}
                                <span class="float-right"><i class="fa fa-star"></i></span>
                                <span class="float-right"><i class="fa fa-star checked"></i></span>
                                <span class="float-right"><i class="fa fa-star checked"></i></span>
                                <span class="float-right"><i class="fa fa-star checked"></i></span>
                                <span class="float-right"><i class="fa fa-star checked"></i></span>
                               
                                {%elif rating.rating == 5 %}
                                <span class="float-right"><i class="fa fa-star checked"></i></span>
                                <span class="float-right"><i class="fa fa-star checked"></i></span>
                                <span class="float-right"><i class="fa fa-star checked"></i></span>
                                <span class="float-right"><i class="fa fa-star checked"></i></span>
                                <span class="float-right"><i class="fa fa-star checked"></i></span>
                                {%endif%}
        
                           </p>
                           <div class="clearfix"></div>
                            <p>{{rating.comment}}</p>
                           
                        </div>
                    </div>
                       
                </div>
            </div>
            <br>

            {%endfor%}


            <div class="text-right">
                <a href="{{ url_for('product_details', page=rating.prev_num, id=product.id) }}"
                   class="btn btn-outline-danger 
                   {% if rating.page == 1 %}disabled{% endif %}">
                    &laquo;
                </a>
             
             {% for page_num in rating.iter_pages(left_edge=1, right_edge=1, left_current=1, right_current=2) %}
             {% if page_num %}
             
                        {% if rating.page == page_num %}
                        <a href="{{ url_for('product_details', page=page_num, id = product.id) }}"
                           class="btn btn-danger">
                            {{ page_num }}
                        </a>
                        {% else %}
                        <a href="{{ url_for('product_details', page=page_num, id=product.id) }}"
                           class="btn btn-outline-danger">
                            {{ page_num }}
                        </a>
                        {% endif %}
                    {% else %}
                        ...
                    {% endif %}
                {% endfor %}
                <a href="{{ url_for('product_details', page=rating.next_num, id = product.id) }}"
                   class="btn btn-outline-danger 
                   {% if rating.page == rating.pages %}disabled{% endif %}">
                    &raquo;
                </a>
             
             
             <p class="text-right mt-3">
               Showing page {{ rating.page }} of {{ rating.pages }}
             </p>
             
             </div>
        </div>





     <br><br><br>


     <div class="card">
        <div class="row">
            <div class="col-2"> <img src="https://image.ibb.co/jw55Ex/def_face.jpg" width="70" class="rounded-circle mt-2"> </div>
            <div class="col-10">
                <div class="comment-box ml-2">
                    <div id="error" style="color: red;"></div>
                    <h4>Add a comment</h4>
                    
                    <form  method="post" id="rate">
                    
                    <input type="hidden" value="{{product.id}}" id="item_id">
                    
                    <div class="rating"> 
                    <input type="radio" name="rating" class="rat" value="5" id="5">
                    <label for="5">☆</label>
                    <input type="radio" name="rating" class="rat"  value="4" id="4">
                    <label for="4">☆</label> 
                    <input type="radio" name="rating" class="rat"  value="3" id="3">
                    <label for="3">☆</label> 
                    <input type="radio" name="rating" class="rat"   value="2" id="2">
                    <label for="2">☆</label>
                    <input type="radio" name="rating" class="rat"  value="1" id="1">
                    <label for="1">☆</label> </div>
                    <div class="comment-area"> <textarea class="form-control" placeholder="what is your view?" rows="4" name="msg" id="msg"></textarea> </div>
                    <div class="comment-btns mt-2">
                        <div class="row">
                            <div class="col-6">

                            </div>
                            <div class="col-6">
                                <div class="pull-right"> <button type="sumbit" class="btn btn-success send btn-sm">Comment</i></button> </div>
                            </div>
                        </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    </div>
</div>



<script type="text/javascript">


 
$(document).on('submit','#rate',function(e)
                   {
        e.preventDefault();
        item_checked = $(".rat:checked").val();
      $.ajax({
        type:'POST',
        url:'/rating_product',
        data:{
          item_check:item_checked,
          product_id:$("#item_id").val(),
          msg:$("#msg").val(),
        },
        success:function(data)
        {
          
            if (data['msg'] != ""){
                $("#error").html(data['msg'])
            }        
            
            if (data['success'] != ""){
                window.location.reload();
            }
       
      
        }
      })
    });    
    
    $(document).on('submit','#add_cart',function(e)
                   {
      e.preventDefault();
      $.ajax({
        type:'POST',
        url:'/cart',
        data:{
          product_id:$("#item_id").val()
        },
        success:function(data)
        {
          
            if (data['value'] != ""){
                $("#lblCartCount").html(data['value'])
            }        

        // $(this).closest('form').find("input[type=password]").val("");
        $("input[name=password]").val('');
        $("input[name=r_password]").val('');
        //   alert(data['data']);
       
      
        }
      })
    });    
  </script>



     <!-- jQery -->
     <script src={{url_for("static",filename="js/jquery-3.4.1.min.js")}}></script>
     <!-- popper js -->
     <script src={{url_for("static",filename="js/popper.min.js")}}></script>
     <!-- bootstrap js -->
     <script src={{url_for("static",filename="js/bootstrap.js")}}></script>
     <!-- custom js -->
     <script src={{url_for("static",filename="js/custom.js")}}></script>


                            <script type='text/javascript'></script>
                            </body>
                        </html>

                        